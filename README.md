ğŸš€ CF-Workers-Raw Proï¼šæè‡´å®‰å…¨çš„ GitHub ç§æœ‰åº“ä»£ç†CF-Workers-Raw Pro æ˜¯ä¸€ä¸ªåŸºäº Cloudflare Workers çš„é«˜æ€§èƒ½ä»£ç†è„šæœ¬ã€‚å®ƒä½œä¸ºä¸­é—´å±‚ï¼Œå…è®¸ä½ é€šè¿‡è‡ªå®šä¹‰ä»¤ç‰Œï¼ˆTokenï¼‰å®‰å…¨åœ°è®¿é—® GitHub ç§æœ‰ä»“åº“ä¸­çš„åŸå§‹æ–‡ä»¶ï¼ˆRawï¼‰ï¼Œè€Œæ— éœ€åœ¨å®¢æˆ·ç«¯æš´éœ²æ•æ„Ÿçš„ GitHub Personal Access Tokenã€‚âœ¨ æ ¸å¿ƒç‰¹æ€§å¤šé‡é‰´æƒä½“ç³»ï¼šæ”¯æŒå…¨å±€ç®¡ç†å‘˜ Tokenã€è·¯å¾„ä¸“ç”¨ Token (TOKEN_PATH) ä»¥åŠç›´æ¥å‚æ•°ä¼ é€’ã€‚éšç§è·¯å¾„éšè—ï¼šæ”¯æŒé€šè¿‡ GH_NAMEã€GH_REPOã€GH_BRANCH ç¯å¢ƒå˜é‡æ·±åº¦éšè— GitHub çš„çœŸå®è·¯å¾„ä¿¡æ¯ã€‚æ™ºèƒ½è·¯å¾„è¡¥å…¨ï¼šè‡ªåŠ¨è¯†åˆ«å¹¶è¡¥å…¨ç¼ºå¤±çš„ä»“åº“åæˆ–åˆ†æ”¯åï¼Œè®©è®¿é—®é“¾æ¥æ›´çŸ­ã€æ›´åƒåŸç”ŸæœåŠ¡å™¨ã€‚æµå¼ä¼ è¾“ä¸å®‰å…¨å‡€åŒ–ï¼šç§»é™¤ GitHub åŸå§‹å“åº”ä¸­å¯èƒ½å¯¼è‡´æµè§ˆå™¨æŠ¥é”™æˆ–æ³„éœ²éšç§çš„æ•æ„Ÿ Headerï¼ˆå¦‚ CSP, X-Frame-Optionsï¼‰ã€‚åçˆ¬ä¸ä¼ªè£…ï¼šå†…ç½® Nginx é£æ ¼é¦–é¡µä¼ªè£…ï¼Œä¿æŠ¤ Worker æ¥å£ä¸è¢«æ¶æ„æ‰«æã€‚ğŸ“– å¿«é€Ÿå¼€å§‹1. åŸºç¡€è®¿é—® (æš´éœ²è·¯å¾„)å‡è®¾ä½ çš„ Worker åŸŸåä¸º raw.example.comï¼šCode snippethttps://raw.example.com/ç”¨æˆ·å/ä»“åº“å/åˆ†æ”¯/æ–‡ä»¶è·¯å¾„?token=ä½ çš„è‡ªå®šä¹‰ä»¤ç‰Œ
2. æ·±åº¦éšè—æ¨¡å¼ (æ¨è)é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œä½ å¯ä»¥å°† Worker å½»åº•ä¼ªè£…æˆä¸€ä¸ªé™æ€æ–‡ä»¶æœåŠ¡å™¨ï¼šè®¾ç½®ï¼šGH_NAME="cmliu", GH_REPO="MyPrivate", GH_BRANCH="main"è®¿é—®ï¼šhttps://raw.example.com/config.json?token=ä½ çš„è‡ªå®šä¹‰ä»¤ç‰Œç»“æœï¼šåå°ä¼šè‡ªåŠ¨æ˜ å°„è‡³ cmliu/MyPrivate/main/config.jsonï¼Œå¤–éƒ¨å®Œå…¨çœ‹ä¸å‡º GitHub ç—•è¿¹ã€‚âš™ï¸ ç¯å¢ƒå˜é‡é…ç½®æŒ‡å—åœ¨ Cloudflare Workers çš„ Settings -> Variables ä¸­é…ç½®ä»¥ä¸‹å‚æ•°ï¼šå˜é‡åç±»å‹å¿…å¡«è¯´æ˜GH_TOKENSecretâœ…ä½ çš„ GitHub PAT (æ¨èå¼€å¯åŠ å¯†)TOKENVariableâŒå…¨å±€ç®¡ç†å‘˜ä»¤ç‰Œï¼Œè®¿é—®æ—¶åŠ  ?token=xxxTOKEN_PATHVariableâŒæ ¼å¼ï¼šä»¤ç‰Œ@è·¯å¾„ï¼Œå¤šæ¡ç”¨é€—å·åˆ†éš”ï¼ˆå¦‚ 123@sh,456@adminï¼‰GH_NAMEVariableâŒéšè—æ¨¡å¼ï¼šGitHub ç”¨æˆ·åGH_REPOVariableâŒéšè—æ¨¡å¼ï¼šGitHub ä»“åº“åGH_BRANCHVariableâŒéšè—æ¨¡å¼ï¼šé»˜è®¤åˆ†æ”¯ (é»˜è®¤ main)ERRORVariableâŒè‡ªå®šä¹‰é”™è¯¯æç¤ºä¿¡æ¯ğŸ¯ é«˜çº§ç”¨æ³•ï¼šè·¯å¾„ä¸“ç”¨ä»¤ç‰Œ (TOKEN_PATH)ä¸ºäº†å®ç°ç»†ç²’åº¦çš„æƒé™æ§åˆ¶ï¼Œä½ å¯ä»¥é’ˆå¯¹ä¸åŒæ–‡ä»¶å¤¹è®¾ç½®ä¸åŒ Tokenï¼šé…ç½®ç¤ºä¾‹ï¼šTOKEN_PATH="pass1@scripts,pass2@private_data"è®¿é—®ç»“æœï¼šè®¿é—® /scripts/test.sh?token=pass1 âœ… é€šè¿‡è®¿é—® /private_data/db.json?token=pass2 âœ… é€šè¿‡ä½¿ç”¨ pass1 è®¿é—® /private_data/ âŒ æ‹’ç»
